{"version":3,"sources":["mvc/ui/ui-select-genomespace.js"],"names":["View","Backbone","extend","initialize","options","self","this","browse_button","_uiMisc2","default","ButtonIcon","title","_localization2","icon","tooltip","onclick","browseGenomeSpace","Input","token_textbox","type","_template","append","$el","filename_textbox","_toolGenomespace2","openFileBrowser","successCallback","data","destination","new_value","undefined","value","_getValue","_setValue","values","split","onchange"],"mappings":"uSAQIA,EAAOC,SAASD,KAAKE,QAErBC,WAAY,SAASC,GAEjB,IAAIC,EAAOC,KACXA,KAAKF,QAAUA,EAGfE,KAAKC,cAAgB,IAAIC,EAAAC,QAAGC,YACxBC,OAAO,EAAAC,EAAAH,SAAG,UACVI,KAAM,gBACNC,SAAS,EAAAF,EAAAH,SAAG,sBACZM,QAAS,WAfrBV,EAAAW,kBAAAZ,MAKID,KAAAA,iBAAY,IAAAK,EAAAC,QAAAQ,MAGRX,KAAAY,cAAed,IAAAA,EAAAA,QAAfa,OAiBIE,KAAM,aAZNN,KAAAA,WAAMP,KAAAc,UAF6BhB,IAGnCU,KAAAA,EAAAA,wBAASO,OAAAf,KAAAC,cAAGe,KACZP,KAAAA,EAAAA,2BAASM,OAAWf,KAAAiB,iBAAAD,KAChBjB,KAAAA,EAAAA,wBAAKW,OAAkBZ,KAAvBc,cAAAI,MAIRN,kBAAA,SAAAZ,GACA,IAAAC,EAAKkB,KAiBLC,EAAAf,QAAmBgB,iBAfnBC,gBAAA,SAAAC,GACAtB,EAAKa,MAALS,EAAqBC,YAArB,IAAyBD,EAAGV,WAM5BG,UAAA,SAAOhB,GACP,MACA,6SAcJgB,MAAAA,SAAWS,GAaV,QAxD2BC,IAAAD,EA2D5BE,OAAOzB,KAAA0B,YAGC1B,KAAK2B,UAAUJ,IAEfG,UAAA,WACH,OAAA1B,KAAAiB,iBAAAQ,QAAA,IAAAzB,KAAAY,cAAAa,SAILC,UAAAA,SAAWH,GACP,GAAAA,EAAU,CAtEc,IAAAK,EAAAL,EAAAM,MAAA,KA6EpB7B,KAAKiB,iBAAiBQ,MAAMG,EAAO,IAJ3C5B,KAAAY,cAAAa,MAAAG,EAAA,IAEI5B,KAAAF,QAAIyB,UAAWvB,KAAAF,QAAAgC,SAAAP,iBAKf7B,KAAAA","file":"../../../scripts/mvc/ui/ui-select-genomespace.js","sourcesContent":["import _l from \"utils/localization\";\n// dependencies\nimport Utils from \"utils/utils\";\nimport Ui from \"mvc/ui/ui-misc\";\nimport GenomespaceBrowser from \"mvc/tool/tool-genomespace\";\n/**\n * GenomeSpace file selector\n */\nvar View = Backbone.View.extend({\n    // initialize\n    initialize: function(options) {\n        // link this\n        var self = this;\n        this.options = options;\n\n        // create insert new list element button\n        this.browse_button = new Ui.ButtonIcon({\n            title: _l(\"Browse\"),\n            icon: \"fa fa-sign-in\",\n            tooltip: _l(\"Browse GenomeSpace\"),\n            onclick: function() {\n                self.browseGenomeSpace(options);\n            }\n        });\n\n        // create genomespace filepath textbox\n        this.filename_textbox = new Ui.Input();\n\n        // create genomespace token textbox\n        this.token_textbox = new Ui.Input({\n            type: \"password\"\n        });\n\n        // create elements\n        this.setElement(this._template(options));\n        this.$(\".ui-gs-browse-button\").append(this.browse_button.$el);\n        this.$(\".ui-gs-filename-textbox\").append(this.filename_textbox.$el);\n        this.$(\".ui-gs-token-textbox\").append(this.token_textbox.$el);\n    },\n\n    /** Browse GenomeSpace */\n    browseGenomeSpace: function(options) {\n        var self = this;\n        GenomespaceBrowser.openFileBrowser({\n            successCallback: function(data) {\n                self.value(`${data.destination}^${data.token}`);\n            }\n        });\n    },\n\n    /** Main Template */\n    _template: function(options) {\n        return (\n            '<div class=\"ui-gs-select-file\">' +\n            '<div class=\"ui-gs-browse-field\">' +\n            '<span class=\"ui-gs-browse-button\" />' +\n            '<span class=\"ui-gs-filename-textbox\" />' +\n            \"</div>\" +\n            '<div class=\"ui-gs-token-field\">' +\n            '<span class=ui-gs-label\"><div class=\"ui-gs-token-label\">Token</div></span>' +\n            '<span class=\"ui-gs-token-textbox\" />' +\n            \"</div>\" +\n            \"</div>\"\n        );\n    },\n\n    /** Return/Set currently selected genomespace filename/token */\n    value: function(new_value) {\n        // check if new_value is defined\n        if (new_value !== undefined) {\n            this._setValue(new_value);\n        } else {\n            return this._getValue();\n        }\n    },\n\n    // get value\n    _getValue: function() {\n        return `${this.filename_textbox.value()}^${this.token_textbox.value()}`;\n    },\n\n    // set value\n    _setValue: function(new_value) {\n        if (new_value) {\n            var values = new_value.split(\"^\");\n            this.filename_textbox.value(values[0]);\n            this.token_textbox.value(values[1]);\n        }\n        this.options.onchange && this.options.onchange(new_value);\n    }\n});\n\nexport default {\n    View: View\n};\n"]}